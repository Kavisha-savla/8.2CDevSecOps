pipeline {
 agent any
 stages {
   stage('Checkout') {
     steps {
       git branch: 'main', url: 'https://github.com/Kavisha-savla/8.2CDevSecOps.git'
     }
   }
   stage('Install Dependencies') {
     steps {
       bat 'npm install'
     }
   }
   stage('Run Tests') {
     steps {
       catchError(buildResult: 'SUCCESS', stageResult: 'FAILURE') {
         bat 'npm test'
       }
     }
   }
   stage('Generate Coverage Report') {
     steps {
       echo 'Coverage stage skipped because no coverage script defined'
     }
   }
   stage('NPM Audit (Security Scan)') {
     steps {
       bat 'npm audit || true' // This will show known CVEs in the output
     }
   }
 }
}
